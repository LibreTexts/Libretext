if(!navigator.webdriver&&!window.matchMedia("print").matches&&!LibreTexts?.active?.exportButtons){const e="ArrowUp",n="ArrowDown",t="Enter",o="Escape",i=" ",r="libreExportButtons",d="libre-pdf-dropdown-btn",a="libre-dwnld-dropdown-btn",s="libre-pdf-dropdown-content",l="libre-dwnld-dropdown-content",p="libre-readability-btn",c="libre-dropdown",m="libre-dropdown-btn",u="libre-pdf-dropdown-item",h="libre-dwnld-dropdown-item",b="libre-icon-btn-text",w="dropdown-open",f="libretexts-dbox-popup",x=async()=>{let e=await LibreTexts.getCoverpage();if(e){const[n]=LibreTexts.parseURL();return e=await LibreTexts.getAPI(`https://${n}.libretexts.org/${e}`),`https://batch.libretexts.org/print/Finished/${n}-${e.id}/Full.pdf`}return!1},g=(e,n="")=>{if(window.LibreTextsBatchCompleted)window.open(window.LibreTextsBatchCompleted,"_blank","noreferrer");else{const t=(e,n)=>{const t=e,o=n?.responseText?.match(/^{.+}$(?!\s*^.*}$)/m);if(o){const e=JSON.parse(o[0]);t&&(t.innerText=`${e.percent}% ${e.eta}`)}},o=(e,n)=>{const t=e,o=n?.responseText?.match(/^{.+}$(?!\s*^.*}$)/m)[0];if(o){const e=JSON.parse(o);if("refreshOnly"===e.filename)return void(t.innerText="Refresh complete.");if("createMatterOnly"===e.filename)return void(t.innerText="Done creating front/back matter.");if("error"===e.message)return void alert(e.text);if(e.filename){t.innerText="Finished";const n=`https://batch.libretexts.org/print/Finished/${e.filename}/Full.pdf`;window.open(n,"_blank","noreferrer"),window.LibreTextsBatchCompleted=n}}},i=document.getElementById(d);i.classList.remove("material-icons"),i.innerText="Request sent...";const r=new XMLHttpRequest;r.open("GET",`https://batch.libretexts.org/print/Libretext=${e?`${e}?no-cache${n}`:window.location.href}`,!0),r.addEventListener("progress",(()=>t(i,r))),r.addEventListener("load",(()=>o(i,r))),r.send()}},F=({dropdownClass:r,dropdownBtnId:d,dropdownBtnClass:a,dropdownBtnTitle:s,dropdownIconName:l,dropdownIconClass:p,dropdownText:c,dropdownOptsId:m,dropdownOptsOpenClass:u,dropdownOptsBtnClass:h,dropdownOptsBtnTxtClass:b,dropdownOptions:w})=>{const f=({text:e,title:n,href:t,listener:o,icon:i},r,d)=>{let a=!1;const s=document.createElement("button");if(Object.assign(s,{classList:h,type:"button",ariaLabel:n,title:n}),"string"==typeof i){const e=document.createElement("span");Object.assign(e,{classList:i,ariaHidden:!0}),s.appendChild(e),a=!0}if("string"==typeof e){const n=document.createTextNode(e);if(a){const e=document.createElement("span");Object.assign(e,{classList:b,ariaHidden:!0}),e.appendChild(n),s.appendChild(e)}else s.appendChild(n)}return"function"==typeof o?s.addEventListener("click",o):"string"==typeof t&&s.addEventListener("click",(e=>{e.preventDefault(),window.open(t,"_blank","noreferrer")})),s.addEventListener("focusout",r),s.addEventListener("keydown",d),s},x=document.createElement("div"),g=document.createElement("button"),F=document.createElement("div");if(x.classList.add(r),Object.assign(g,{id:d,classList:a,type:"button",title:s,tabIndex:0,ariaExpanded:!1}),l&&p){const e=document.createElement("span");Object.assign(e,{classList:p,ariaHidden:!0}),e.appendChild(document.createTextNode(l)),g.appendChild(e)}if(c){const e=document.createTextNode(c);e.ariaHidden=!0,g.appendChild(e)}x.appendChild(g),F.id=m;const y=e=>{e&&e.preventDefault(),g.ariaExpanded=!0,F.classList.add(u)},C=e=>{e&&e.preventDefault(),g.ariaExpanded=!1,F.classList.remove(u)};x.addEventListener("mouseenter",y),x.addEventListener("mouseleave",C),x.addEventListener("keydown",(e=>{e.key===o&&C(e)})),x.addEventListener("focusout",(e=>{if(F?.children){const n=Array.from(F.children);n&&n.length>0&&(n.includes(e.relatedTarget)||C(e))}})),g.addEventListener("click",y),g.addEventListener("keydown",(e=>{e.key===t||e.key===i?y(e):e.key===n&&(e.preventDefault(),"true"===g.ariaExpanded&&F?.children&&F.children.length>0&&F.children[0].focus())}));const $=e=>{if(F?.children){e.stopPropagation();const n=Array.from(F.children);if(n&&n.length>0){const t=n[n.length-1];e.target!==t||n.includes(e.relatedTarget)||C(e)}}},L=t=>{if((t.key===n||t.key===e)&&(t.preventDefault(),F?.children)){const o=Array.from(F.children);if(o&&o.length>0){const i=o.findIndex((e=>e===t.target));if(i>-1){let r=null,d=null;i-1>=0&&o[i-1]&&(r=o[i-1]),i+1<o.length&&o[i+1]&&(d=o[i+1]),t.key===n&&d&&d.focus(),t.key===e&&r&&r.focus()}}}};if(w&&w.length>0)for(let e=0,n=w.length;e<n;e+=1)F.appendChild(f(w[e],$,L));return x.appendChild(F),x},y=async()=>{const e="true"===document.getElementById("adminHolder").innerText,n="true"===document.getElementById("proHolder").innerText,o=document.getElementById("groupHolder").innerText,i=e||n,y=e||n&&(o.includes("Developer")||o.includes("BatchAccess")),[C]=LibreTexts.parseURL();try{const o=document.getElementById("pageTagsHolder").innerText;let $=null;const L=window.location.href.replace(/#$/,"");if(o.includes("coverpage:yes")){const e=document.getElementById("pageIDHolder").innerText,t="espanol"===C,o=window.location.href.includes("/Courses")?"Courses":"Bookshelves",i=t?"home":o,r=await fetch(`https://api.libretexts.org/DownloadsCenter/${C}/${i}.json`);let d=await r.json();d.items&&(d=d.items);const a=d.find((n=>n.id===e||n.altID===e));if(a){const e=!n&&a.tags.includes("luluPro");a.failed||e||($=a)}}const v=!$&&o.includes('"article:topic-guide"'),T=await x(),E=document.createDocumentFragment(),k=document.createElement("div");k.id=r;const B=[];if(T&&B.push({text:"Full Book",title:"Get a PDF of this book (opens in a new tab)",href:T}),v&&B.push({text:"Chapter",title:"Get a PDF of this chapter (opens in a new tab)",listener:e=>{e.preventDefault(),g()}}),o.includes('"article:topic"')&&B.push({text:"Page",title:"Get a PDF of this page (opens in a new tab)",href:`https://batch.libretexts.org/print/url=${window.location.href}.pdf`}),i&&B.length>0&&B.push({text:"Compile Book",title:"Compile this page and all subpages (opens in new tab when complete)",listener:e=>{e.preventDefault(),g()},icon:"mt-icon-spinner6"}),y&&$&&B.push({text:"Compile Full",title:"Fully recompile this book (opens in new tab when complete)",listener:e=>{e.preventDefault();window.confirm("This will refresh all of the pages and will take quite a while. Are you sure?")&&g(window.location.href)},icon:"mt-icon-spinner6"}),B.length>0&&k.appendChild(F({dropdownClass:c,dropdownBtnId:d,dropdownBtnClass:m,dropdownBtnTitle:"PDF Export Options",dropdownIconName:"picture_as_pdf",dropdownIconClass:"material-icons",dropdownOptsId:s,dropdownOptsOpenClass:w,dropdownOptsBtnClass:u,dropdownOptsBtnTxtClass:b,dropdownOptions:B})),$){let e="https://batch.libretexts.org/print/Finished/";$.zipFilename&&(e+=$.zipFilename.replace("/Full.pdf",""));const n=[{text:"Full PDF",title:"Download Full PDF",href:`${e}/Full.pdf`,icon:"mt-icon-file-pdf"},{text:"Import into LMS",title:"Download LMS Import File",href:`${e}/LibreText.imscc`,icon:"mt-icon-graduation"},{text:"Individual ZIP",title:"Download ZIP of Individual Pages",href:`${e}/Individual.zip`,icon:"mt-icon-file-zip"},{text:"Buy Print Copy",title:"Buy Paper Copy (opens in new tab)",href:`https://libretexts.org/bookstore/single.html?${$.zipFilename}`,icon:"mt-icon-book2"},{text:"Print Book Files",title:"Download Publication Files",href:`${e}/Publication.zip`,icon:"mt-icon-book3"}];k.appendChild(F({dropdownClass:c,dropdownBtnId:a,dropdownBtnClass:m,dropdownBtnTitle:"LibreText Download Options",dropdownText:"Downloads",dropdownOptsId:l,dropdownOptsOpenClass:w,dropdownOptsBtnClass:h,dropdownOptsBtnTxtClass:b,dropdownOptions:n}))}const D=document.createElement("button");Object.assign(D,{id:p,title:"Open Readability Menu",type:"button",tabIndex:0});const O=document.createElement("span");Object.assign(O,{classList:"mt-icon-binoculars",ariaHidden:!0}),D.appendChild(O);const I=document.createElement("span");Object.assign(I,{classList:b,ariaHidden:!0}),I.appendChild(document.createTextNode("Readability")),D.appendChild(I);const P=e=>{e.preventDefault(),"function"==typeof LibreTexts.active?.sidebarToggleDrawer("readability")&&LibreTexts.active?.sidebarToggleDrawer("readability")()};if(D.addEventListener("click",P),D.addEventListener("keydown",(e=>{e.key===t&&P(e)})),k.appendChild(D),!e){const e=document.createElement("a");Object.assign(e,{href:"https://donorbox.org/libretexts",target:"_blank",rel:"noreferrer",classList:`${f} notSS`,id:"donate",ariaLabel:"Donate to LibreTexts (opens in modal)"}),e.appendChild(document.createTextNode("Donate")),k.appendChild(e),window.DonorBox={widgetLinkClassName:f};const n=document.createElement("script");Object.assign(n,{type:"text/javascript",src:"https://donorbox.org/install-popup-button.js",defer:!0}),document.body.append(n)}const j="\n        color: #FFFFFF !important;\n        border: none !important;\n        border-radius: 0;\n        margin: 0 2.5px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 35px;\n        box-shadow: none !important;\n      ",A="\n        display: block !important;\n        z-index: 1000;\n        position: absolute;\n        width: 150px;\n        margin-left: 2.5px;\n      ",H="\n        width: 150px !important;\n        border: none !important;\n        border-radius: 0 !important;\n        box-shadow: none !important;\n        color: #FFFFFF !important;\n        height: 40px !important;\n      ";document.head.insertAdjacentHTML("beforeend",`\n      <style>\n        #${r} {\n          display: flex;\n          flex-wrap: wrap;\n          align-items: stretch;\n          justify-content: center;\n        }\n        #${p}, #${p}:hover {\n          background-color: #D4D4D4 !important;\n          color: #000000 !important;\n          border: none !important;\n          border-radius: 0;\n          box-shadow: none !important;\n          height: 35px;\n          margin: 0 2.5px;\n        }\n        #${p}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        .${b} {\n          margin-left: 5px;\n        }\n        #${d} {\n          background-color: #C53030 !important;\n          ${j}\n        }\n        #${d}:focus {\n          border: 3px solid #30B3F6 !important;\n          box-shadow: none !important;\n        }\n        #${s} {\n          display: none;\n          background-color: #C53030;\n          color: #FFFFFF;\n          font-size: 14px;\n        }\n        #${s}.${w} {\n          ${A}\n        }\n        #${s} li:not(:first-child) {\n          border-top: 1px solid #FFFFFF;\n        }\n        .${u}, .${u}:hover {\n          background-color: #C53030 !important;\n          ${H}\n        }\n        .${u}:hover {\n          background-color: #9C2626 !important;\n        }\n        .${u}:not(:first-child) {\n          border-top: 1px solid white !important;\n        }\n        .${u}:focus {\n          border: 3px solid #30B3F6 !important;\n          box-shadow: none !important;\n        }\n        #${a} {\n          background-color: #187AC9 !important;\n          ${j}\n        }\n        #${a}:focus {\n          border: 3px solid #0B0115 !important;\n          box-shadow: none !important;\n        }\n        #${l} {\n          display: none;\n          background-color: #187AC9;\n          color: #FFFFFF;\n          font-size: 14px; \n        }\n        #${l}.${w} {\n          ${A}\n        }\n        #${l} li:not(:first-child) {\n          border-top: 1px solid #FFFFFF;\n        }\n        .${h}, .${h}:hover {\n          background-color: #187AC9 !important;\n          ${H}\n        }\n        .${h}:hover {\n          background-color: #1361A0 !important;\n        }\n        .${h}:not(:first-child) {\n          border-top: 1px solid white !important;\n        }\n        .${h}:focus {\n          border: 3px solid #0B0115 !important;\n          box-shadow: none !important;\n        }\n      </style>\n    `),E.appendChild(k);const N=document.querySelector(".elm-social-share");N&&N.replaceChildren(E);const z=document.getElementById("getTOCLink");z&&(z.rel="noopener nofollow",z.href=`https://batch.libretexts.org/print/toc=${L}`)}catch(e){console.error(`[ExportButtons]: ${e.toString()}`)}LibreTexts.active.exportButtons=!0,LibreTexts.batch=g};window.addEventListener("load",y)}