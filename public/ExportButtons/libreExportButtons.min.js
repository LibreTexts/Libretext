if(!navigator.webdriver&&!window.matchMedia("print").matches&&!LibreTexts?.active?.exportButtons){const e="ArrowUp",n="ArrowDown",t="Enter",o="Escape",r=" ",i="libreExportButtons",a="libre-pdf-dropdown-btn",d="libre-dwnld-dropdown-btn",s="libre-pdf-dropdown-content",p="libre-dwnld-dropdown-content",l="libre-review-dropdown-btn",c="libre-review-dropdown-content",m="libre-commons-adoptionreport-btn",u="libre-commons-peerreview-btn",b="libre-commons-adapt-btn",w="libre-commons-materials-btn",h="libre-commons-btn",f="libre-conductor-project-btn",x="libre-dropdown",g="libre-dropdown-btn",$="libre-pdf-dropdown-item",C="libre-dwnld-dropdown-item",y="libre-review-dropdown-item",v="libre-icon-btn-text",F="dropdown-open",k="libretexts-dbox-popup",L="libre-buy-print-copy-btn";let E=null,T=null;const B=async()=>{const e=await LibreTexts.getCoverpage();if(e){const[n]=LibreTexts.parseURL();T=n,E=await LibreTexts.getAPI(`https://${n}.libretexts.org/${e}`),LibreTexts.current.coverpage=E;const t=new Event("libre-coverpageinfoavailable",{cancelable:!0});return window.dispatchEvent(t),!0}return!1},D=async()=>(E||await B(),!!E&&`https://batch.libretexts.org/print/Letter/Finished/${T}-${E.id}/Full.pdf`),O=async()=>{if(E||await B(),E)try{const e=await fetch(`https://commons.libretexts.org/api/v1/commons/book/${T}-${E.id}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(200===e.status){const n=(await e.json()).book;LibreTexts.current.commons=n;const t=new Event("libre-commonsinfoavailable",{cancelable:!0});return window.dispatchEvent(t),n}}catch(e){console.error(`[ExportButtons]: ${e.toString()}`)}return null},I=async()=>{try{if(E||await B(),E){const e=new Event("libre-projectinfoavailable",{cancelable:!0}),n=localStorage.getItem(`projectID-${T}-${E.id}`);if(n)return LibreTexts.current.projectID=n,window.dispatchEvent(e),n;const t=await fetch(`https://commons.libretexts.org/api/v1/project/find-by-book/${T}-${E.id}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(200===t.status){const n=(await t.json()).projectID;return LibreTexts.current.projectID=n,window.dispatchEvent(e),n&&localStorage.setItem(`projectID-${T}-${E.id}`,n),n}}}catch(e){console.error(`[ExportButtons]: ${e.toString()}`)}return null},j=async(e=!1)=>{if(E||await B(),E){const n="espanol"===T,t=window.location.href.includes("/Courses")?"Courses":"Bookshelves",o=`https://api.libretexts.org/DownloadsCenter/${T}/${n?"home":t}.json`,r=await fetch(o);let i=await r.json();i.items&&(i=i.items);const a=E.id.toString(),d=i.find((e=>e.id===a||e.altID===a));if(d){const n=!e&&d.tags.includes("luluPro");if(!d.failed&&!n)return d}}return null},P=(e,n="")=>{if(window.LibreTextsBatchCompleted)window.open(window.LibreTextsBatchCompleted,"_blank","noreferrer");else{const t=(e,n)=>{const t=e,o=n?.responseText?.match(/^{.+}$(?!\s*^.*}$)/m);if(o){const e=JSON.parse(o[0]);t&&(t.innerText=`${e.percent}% ${e.eta}`)}},o=(e,n)=>{const t=e,o=n?.responseText?.match(/^{.+}$(?!\s*^.*}$)/m)[0];if(o){const e=JSON.parse(o);if("refreshOnly"===e.filename)return void(t.innerText="Refresh complete.");if("createMatterOnly"===e.filename)return void(t.innerText="Done creating front/back matter.");if("error"===e.message)return void alert(e.text);if(e.filename){t.innerText="Finished";const n=`https://batch.libretexts.org/print/Finished/${e.filename}/Full.pdf`;window.open(n,"_blank","noreferrer"),window.LibreTextsBatchCompleted=n}}},r=document.getElementById(a);r.classList.remove("material-icons"),r.innerText="Request sent...";const i=new XMLHttpRequest;i.open("GET",`https://batch.libretexts.org/print/Libretext=${e?`${e}?no-cache${n}`:window.location.href}`,!0),i.addEventListener("progress",(()=>t(r,i))),i.addEventListener("load",(()=>o(r,i))),i.send()}},A=e=>{const n=prompt("Number of content pages:");n&&!Number.isNaN(n)?window.open(`https://batch.libretexts.org/print/cover=${e}&options={"numPages":"${n}", "hasExtraPadding": true}`,"_blank","noreferrer"):alert(`${n} is not recognized as a number! Please try again.`)},N=({dropdownClass:i,dropdownBtnId:a,dropdownBtnClass:d,dropdownBtnTitle:s,dropdownIconName:p,dropdownIconClass:l,dropdownText:c,dropdownOptsId:m,dropdownOptsOpenClass:u,dropdownOptsBtnClass:b,dropdownOptsBtnTxtClass:w,dropdownOptions:h})=>{const f=({text:e,title:n,href:t,listener:o,icon:r},i,a)=>{let d=!1;const s=document.createElement("button");if(Object.assign(s,{classList:b,type:"button",ariaLabel:n,title:n}),"string"==typeof r){const e=document.createElement("span");Object.assign(e,{classList:r,ariaHidden:!0}),s.appendChild(e),d=!0}if("string"==typeof e){const n=document.createTextNode(e);if(d){const e=document.createElement("span");Object.assign(e,{classList:w,ariaHidden:!0}),e.appendChild(n),s.appendChild(e)}else s.appendChild(n)}return"function"==typeof o?s.addEventListener("click",o):"string"==typeof t&&s.addEventListener("click",(e=>{e.preventDefault(),window.open(t,"_blank","noreferrer")})),s.addEventListener("focusout",i),s.addEventListener("keydown",a),s},x=document.createElement("div"),g=document.createElement("button"),$=document.createElement("div");if(x.classList.add(i),Object.assign(g,{id:a,classList:d,type:"button",title:s,tabIndex:0,ariaExpanded:!1}),p&&l){const e=document.createElement("span");Object.assign(e,{classList:l,ariaHidden:!0}),e.appendChild(document.createTextNode(p)),g.appendChild(e)}if(c){const e=document.createTextNode(c);e.ariaHidden=!0,g.appendChild(e)}x.appendChild(g),$.id=m;const C=e=>{e&&e.preventDefault(),g.ariaExpanded=!0,$.classList.add(u)},y=e=>{e&&e.preventDefault(),g.ariaExpanded=!1,$.classList.remove(u)};x.addEventListener("mouseenter",C),x.addEventListener("mouseleave",y),x.addEventListener("keydown",(e=>{e.key===o&&y(e)})),x.addEventListener("focusout",(e=>{if($?.children){const n=Array.from($.children);n&&n.length>0&&(n.includes(e.relatedTarget)||y(e))}})),g.addEventListener("click",C),g.addEventListener("keydown",(e=>{e.key===t||e.key===r?C(e):e.key===n&&(e.preventDefault(),"true"===g.ariaExpanded&&$?.children&&$.children.length>0&&$.children[0].focus())}));const v=e=>{if($?.children){e.stopPropagation();const n=Array.from($.children);if(n&&n.length>0){const t=n[n.length-1];e.target!==t||n.includes(e.relatedTarget)||y(e)}}},F=t=>{if((t.key===n||t.key===e)&&(t.preventDefault(),$?.children)){const o=Array.from($.children);if(o&&o.length>0){const r=o.findIndex((e=>e===t.target));if(r>-1){let i=null,a=null;r-1>=0&&o[r-1]&&(i=o[r-1]),r+1<o.length&&o[r+1]&&(a=o[r+1]),t.key===n&&a&&a.focus(),t.key===e&&i&&i.focus()}}}};if(h&&h.length>0)for(let e=0,n=h.length;e<n;e+=1)$.appendChild(f(h[e],v,F));return x.appendChild($),x},R=async()=>{const e="true"===document.getElementById("proHolder").innerText,n="true"===document.getElementById("adminHolder").innerText,o=document.getElementById("groupHolder").innerText,r=n||e,B=n||e&&(o.includes("Developer")||o.includes("BatchAccess")),R=Number.parseInt(document.getElementById("pageIDHolder").innerText);try{const o=document.getElementById("pageTagsHolder").innerText,A=window.location.href.replace(/#$/,""),S=await j(),H=o.includes('"article:topic-guide"'),_=!S&&H||S&&S.id!==R&&H,z=await D(),M=document.createDocumentFragment(),q=document.createElement("div");q.id=i;const V=[];if(z&&(LibreTexts.current.downloads.pdf.full=z,V.push({text:"Full Book",title:"Get a PDF of this book (opens in a new tab)",href:z})),_&&V.push({text:"Chapter",title:"Get a PDF of this chapter (opens in a new tab)",listener:e=>{e.preventDefault(),P()}}),o.includes('"article:topic"')){let e="";if(window.location.search){const n=new URLSearchParams(window.location.search);null===n.get("no-cache")&&null===n.get("nocache")||(e="?no-cache")}const n=`https://batch.libretexts.org/print/url=${`${window.location.origin}${window.location.pathname}`}.pdf${e}`;LibreTexts.current.downloads.pdf.page=n,V.push({text:"Page",title:"Get a PDF of this page (opens in a new tab)",href:n})}if(r&&V.length>0&&V.push({text:"Compile Book",title:"Compile this page and all subpages (opens in new tab when complete)",listener:e=>{e.preventDefault(),P()},icon:"mt-icon-spinner6"}),B&&S&&V.push({text:"Compile Full",title:"Fully recompile this book (opens in new tab when complete)",listener:e=>{e.preventDefault();window.confirm("This will refresh all of the pages and will take quite a while. Are you sure?")&&P(window.location.href)},icon:"mt-icon-spinner6"}),V.length>0&&q.appendChild(N({dropdownClass:x,dropdownBtnId:a,dropdownBtnClass:g,dropdownBtnTitle:"PDF Export Options",dropdownIconName:"picture_as_pdf",dropdownIconClass:"material-icons",dropdownOptsId:s,dropdownOptsOpenClass:F,dropdownOptsBtnClass:$,dropdownOptsBtnTxtClass:v,dropdownOptions:V})),S){let e="https://batch.libretexts.org/print/Letter/Finished";S.zipFilename&&(e=`${e}/${S.zipFilename.replace("/Full.pdf","")}`);const n=`https://commons.libretexts.org/store/product/${T}-${E.id}`,t=[{key:"full",text:"Full PDF",title:"Download Full PDF",href:`${e}/Full.pdf`,icon:"mt-icon-file-pdf"},{key:"lms",text:"Import into LMS",title:"Download LMS Import File",href:`${e}/LibreText.imscc`,icon:"mt-icon-graduation"},{key:"zip",text:"Individual ZIP",title:"Download ZIP of Individual Pages",href:`${e}/Individual.zip`,icon:"mt-icon-file-zip"},...S.zipFilename&&[{key:"bookstore",text:"Buy Print Copy",title:"Buy Print Copy (opens in new tab)",href:n,icon:"mt-icon-book2"}],{key:"publication",text:"Print Book Files",title:"Download Publication Files",href:`${e}/Publication.zip`,icon:"mt-icon-book3"}];t.forEach((e=>{LibreTexts.current.downloads[e.key]=e.href}));const o=new Event("libre-downloadsinfoavailable",{cancelable:!0});if(window.dispatchEvent(o),q.appendChild(N({dropdownClass:x,dropdownBtnId:d,dropdownBtnClass:g,dropdownBtnTitle:"LibreText Download Options",dropdownText:"Downloads",dropdownOptsId:p,dropdownOptsOpenClass:F,dropdownOptsBtnClass:C,dropdownOptsBtnTxtClass:v,dropdownOptions:t})),S.zipFilename){const e=document.createElement("a");Object.assign(e,{title:"Buy Print Copy (opens in new tab)",href:n,target:"_blank",rel:"noreferrer",classList:L,id:"buyPrintCopy",ariaLabel:"Buy Print Copy"}),e.classList.add(L);const t=document.createElement("span");t.classList.add("mt-icon-book2",`${L}-icon-span`),t.setAttribute("aria-hidden","true");const o=document.createTextNode(" Buy Print Copy");e.appendChild(t),e.appendChild(o),q.appendChild(e)}}const X=await O();if(X){const e=`https://commons.libretexts.org/book/${X.bookID}`,n=n=>{n.preventDefault(),window.open(`${e}?adoptionreport=show`,"_blank","noreferrer")},o=n=>{n.preventDefault(),window.open(`${e}?peerreview=show`,"_blank","noreferrer")},r=e=>{e.preventDefault(),window.open(`https://adapt.libretexts.org/courses/${X.adaptCourseID}/anonymous`,"_blank","noreferrer")},i=n=>{n.preventDefault(),window.open(`${e}?materials=show`,"_blank","noreferrer")},a=[{text:"Submit Adoption Report",title:"Submit an Adoption Report for this text (opens in new tab)",listener:e=>{e.preventDefault(),n(e)},icon:"mt-icon-user-activity"}];if((X.hasPeerReviews||X.allowAnonPR)&&a.push({text:"Submit a Peer Review",title:"Submit a Peer Review for this text (opens in new tab)",listener:e=>{e.preventDefault(),o(e)},icon:"mt-icon-support-man"}),q.appendChild(N({dropdownClass:x,dropdownBtnId:l,dropdownBtnClass:y,dropdownBtnTitle:"Review & Adopt Options",dropdownText:"Review / Adopt",dropdownOptsId:c,dropdownOptsOpenClass:F,dropdownOptsBtnClass:y,dropdownOptsBtnTxtClass:v,dropdownOptions:a})),X.hasAdaptCourse){const e=document.createElement("button");Object.assign(e,{id:b,title:"View ADAPT Homework Resources (opens in new tab)",type:"button",tabIndex:0}),e.appendChild(document.createTextNode("Homework")),e.addEventListener("click",r),e.addEventListener("keydown",(e=>{e.key===t&&r(e)})),q.appendChild(e)}if(X.hasMaterials){const e=document.createElement("button");Object.assign(e,{id:w,title:"View Ancillary Materials (opens in new tab)",type:"button",tabIndex:0}),e.appendChild(document.createTextNode("Ancillary Materials")),e.addEventListener("click",i),e.addEventListener("keydown",(e=>{e.key===t&&i(e)})),q.appendChild(e)}const d=document.createElement("a");Object.assign(d,{id:h,ariaLabel:"View LibreCommons Catalog Entry (opens in new tab)",title:"View LibreCommons Catalog Entry (opens in new tab)",type:"button",target:"_blank",rel:"noreferrer",href:e}),d.appendChild(document.createTextNode("View on Commons")),q.appendChild(d)}if(!n){const e=document.createElement("a");Object.assign(e,{href:"https://donorbox.org/libretexts",target:"_blank",rel:"noreferrer",classList:`${k} notSS`,id:"donate",ariaLabel:"Donate to LibreTexts (opens in modal)"});const n=document.createElement("span");n.classList.add("mt-icon-support-hands",".donate-icon-span"),n.setAttribute("aria-hidden","true"),e.appendChild(n),e.appendChild(document.createTextNode(" Donate")),q.appendChild(e),window.DonorBox={widgetLinkClassName:k};const t=document.createElement("script");Object.assign(t,{type:"text/javascript",src:"https://donorbox.org/install-popup-button.js",defer:!0}),document.body.append(t)}const G=await I();if(G&&e){const e=document.createElement("a");Object.assign(e,{id:f,ariaLabel:"View Conductor Project (opens in new tab)",title:"View Conductor Project (opens in new tab)",type:"button",target:"_blank",rel:"noreferrer",href:`https://conductor.libretexts.org/projects/${G}`}),e.appendChild(document.createTextNode("Conductor Project")),q.appendChild(e)}const U="\n        color: #FFFFFF !important;\n        border: none !important;\n        border-radius: 0.25em !important;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 35px !important;\n        box-shadow: none !important;\n      ",J="\n        display: block !important;\n        z-index: 1000;\n        position: absolute;\n        width: 150px;\n      ",W="\n        width: 150px !important;\n        border: none !important;\n        border-radius: 0.25em !important;\n        box-shadow: none !important;\n        color: #FFFFFF !important;\n        height: 40px !important;\n      ";document.head.insertAdjacentHTML("beforeend",`\n      <style>\n        #${i} {\n          display: flex;\n          flex-wrap: wrap;\n          align-items: stretch;\n          justify-content: center;\n          gap: 0.25em;\n        }\n        .${v} {\n          margin-left: 5px;\n        }\n        #${a} {\n          background-color: #C53030 !important;\n          ${U}\n        }\n        #${a}:focus {\n          border: 3px solid #30B3F6 !important;\n          box-shadow: none !important;\n        }\n        #${s} {\n          display: none;\n          background-color: #C53030;\n          color: #FFFFFF;\n          font-size: 14px;\n        }\n        #${s}.${F} {\n          ${J}\n        }\n        #${s} li:not(:first-child) {\n          border-top: 1px solid #FFFFFF;\n        }\n        .${$}, .${$}:hover {\n          background-color: #C53030 !important;\n          ${W}\n        }\n        .${$}:hover {\n          background-color: #9C2626 !important;\n        }\n        .${$}:not(:first-child) {\n          border-top: 1px solid white !important;\n        }\n        .${$}:focus {\n          border: 3px solid #30B3F6 !important;\n          box-shadow: none !important;\n        }\n        #${h}, #${h} {\n          background-color: #088A20 !important;\n          padding-left: 10px !important;\n          padding-right: 10px !important;\n          ${U}\n        }\n        #${l} {\n          background-color: #CD4D12 !important;\n          ${U}\n        }\n        #${l}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        #${c} {\n          display: none;\n          background-color: #CD4D12;\n          color: #FFFFFF;\n          font-size: 14px;\n        }\n        #${c}.${F} {\n          ${J}\n        }\n        .${y}, .${y}:hover {\n          background-color: #CD4D12 !important;\n          ${W}\n        }\n        .${y}:hover {\n          background-color: #a13706 !important;\n        }\n        .${y}:not(:first-child) {\n          border-top: 1px solid white !important;\n        }\n        .${y}:focus {\n          border: 3px solid #0B0115 !important;\n          box-shadow: none !important;\n        }\n        #${d} {\n          background-color: #187AC9 !important;\n          ${U}\n        }\n        #${d}:focus {\n          border: 3px solid #0B0115 !important;\n          box-shadow: none !important;\n        }\n        #${p} {\n          display: none;\n          background-color: #187AC9;\n          color: #FFFFFF;\n          font-size: 14px; \n        }\n        #${p}.${F} {\n          ${J}\n        }\n        #${p} li:not(:first-child) {\n          border-top: 1px solid #FFFFFF;\n        }\n        .${C}, .${C}:hover {\n          background-color: #187AC9 !important;\n          ${W}\n        }\n        .${C}:hover {\n          background-color: #1361A0 !important;\n        }\n        .${C}:not(:first-child) {\n          border-top: 1px solid white !important;\n        }\n        .${C}:focus {\n          border: 3px solid #0B0115 !important;\n          box-shadow: none !important;\n        }\n        #${m}, #${m} {\n          background-color: #088A20 !important;\n          ${U}\n        }\n        #${m}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        #${u}, #${u} {\n          background-color: #CD4D12 !important;\n          ${U}\n        }\n        #${u}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        #${b}, #${b} {\n          background-color: #088488 !important;\n          ${U}\n        }\n        #${b}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        #${w}, #${w} {\n          background-color: #2E79C6 !important;\n          ${U}\n        }\n        #${w}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        #${f}, #${f} {\n          background-color: #2441E7 !important;\n          padding-left: 10px !important;\n          padding-right: 10px !important;\n          ${U}\n        }\n        #${f}:focus {\n          border: 3px solid #30B3F6 !important;\n        }\n        .${L} {\n          background-color: #57116A !important;\n          color: #FFFFFF !important;\n          border: none !important;\n          border-radius: 0.25em !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          padding: 8px !important;\n          height: 19px !important;\n          box-shadow: none !important;\n          gap: 6px !important;\n        }\n        .${L}-icon-span {\n          padding-top: 3px\n        }\n        #donate {\n          padding: 8px !important;\n          border-radius: 0.25em !important;\n          height: 19px !important;\n          gap: 6px !important;\n        }\n        .donate-icon-span {\n          padding-top: 3px\n        }\n      </style>\n    `),M.appendChild(q);const Z=document.querySelector(".elm-social-share");Z&&Z.replaceChildren(M);const K=document.getElementById("getTOCLink");K&&(K.rel="noopener nofollow",K.href=`https://batch.libretexts.org/print/toc=${A}`)}catch(e){console.error(`[ExportButtons]: ${e.toString()}`)}LibreTexts.active.exportButtons=!0,LibreTexts.batch=P,LibreTexts.cover=A};window.addEventListener("load",R)}