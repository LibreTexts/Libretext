console.log("CKEditor LibreQuery Plugin"),LibreEditor.libreQuery=e=>{async function t(e,t){const r="Sorry, we're having trouble loading the template. Please use Elements > Templates to insert.";try{const o=new XMLHttpRequest;o.onerror=e=>{console.error(e),alert(r)},o.onload=()=>{const e=JSON.parse(o.responseText);"string"==typeof e.template&&t.insertHtml(e.template.trim())},o.open("PUT","https://api.libretexts.org/endpoint/template"),o.setRequestHeader("Content-Type","application/json;"),o.send(JSON.stringify({path:`Template:${e}`,subdomain:LibreTexts.extractSubdomain()}))}catch(e){alert(r),console.error(e)}}Array.isArray(e.toolbar[12])&&e.toolbar[12].push("LibreQueryOptions"),CKEDITOR.plugins.add("LibreQuery",{requires:["menubutton"],init(e){const r="Query",o="LibreQueryGroup",n={h5p:{label:"H5P",command:"QueryH5P",group:o},imath:{label:"IMath",command:"QueryIMath",group:o},webwork:{label:"WeBWorK",command:"QueryWebWork",group:o}};e.ui.add("LibreQueryOptions",CKEDITOR.UI_MENUBUTTON,{icon:"https://cdn.libretexts.net/Icons/query.ico",label:r,title:r,voiceLabel:r,toolbar:"insert",className:"cke_librequery",onMenu:()=>n}),e.addMenuGroup(o),e.addMenuItems(n);const a=Object.values(n);for(let r=0,o=a.length;r<o;r+=1){const o=a[r].command;e.addCommand(o,{exec(e){t(o,e)}})}}}),CKEDITOR.config.extraPlugins+=(""===CKEDITOR.config.extraPlugins?"":",")+"LibreQuery"};